services:
  mycloud:
    build:
      context: .
      args:
        BASE_PATH: /cloud
    container_name: mycloud
    restart: unless-stopped
    ports:
      - "6868:6868"
    environment:
      - NODE_ENV=production
      - PORT=6868
      - BASE_PATH=/cloud
      - JWT_SECRET=${JWT_SECRET:-change-this-secret-key-in-production}
      - DB_PATH=/app/data/database.sqlite
      - UPLOAD_PATH=/app/data/uploads
      - MAX_FILE_SIZE=524288000
      - ADMIN_USERNAME=${ADMIN_USERNAME:-admin}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin123}
      - ADMIN_EMAIL=${ADMIN_EMAIL:-admin@mycloud.local}
    volumes:
      - mycloud-data:/app/data
    networks:
      - mycloud-network

volumes:
  mycloud-data:
    driver: local

networks:
  mycloud-network:
    driver: bridge
